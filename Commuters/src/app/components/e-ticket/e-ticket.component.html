      <div *ngIf="visible && selectedRoute" class="e-ticket-inline" style="margin-top:16px;">
        <ion-card class="ticket-card">
          <ion-card-header class="ticket-header">
            <div class="ticket-header-content">
              <div class="ticket-icon">
                <ion-icon name="bus" style="font-size: 32px;"></ion-icon>
              </div>
              <div class="ticket-title-section">
                <ion-card-title style="font-size: 18px; margin-bottom: 4px;">Transit e-Ticket</ion-card-title>
                <ion-card-subtitle style="font-size: 13px;">{{ selectedRoute.name }}</ion-card-subtitle>
              </div>
            </div>
          </ion-card-header>
          
          <ion-card-content class="ticket-content">
            <!-- Route Information -->
            <div class="ticket-section">
              <div class="section-label">Route Details</div>
              <div class="route-info-grid">
                <div class="info-item">
                  <ion-icon name="location" color="success"></ion-icon>
                  <div>
                    <div class="info-label">From</div>
                    <div class="info-value">{{ getOrigin() }}</div>
                  </div>
                </div>
                <div class="info-item">
                  <ion-icon name="flag" color="danger"></ion-icon>
                  <div>
                    <div class="info-label">To</div>
                    <div class="info-value">{{ getDestination() }}</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Fare Information -->
            <div class="ticket-section">
              <div class="fare-display">
                <div class="fare-label">TOTAL FARE</div>
                <div class="fare-amount">â‚±{{ ticketFare || selectedRoute?.basefare }}</div>
              </div>
            </div>

            <!-- QR Code Section -->
            <div class="ticket-section qr-section">
              <div class="qr-code-placeholder">
                <ion-icon name="qr-code" style="font-size: 80px; color: #000;"></ion-icon>
                <div style="font-size: 12px; color: #666; margin-top: 8px;">Scan to validate ticket</div>
              </div>
            </div>

            <!-- Ticket Details -->
            <div class="ticket-section ticket-details">
              <div class="detail-row">
                <span class="detail-label">Ticket ID:</span>
                <span class="detail-value">#{{ ticketID }}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Issue Date:</span>
                <span class="detail-value">{{ currentTime }}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Route Distance:</span>
                <span class="detail-value">{{ getRouteDistance() }}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Valid For:</span>
                <span class="detail-value">Single Journey</span>
              </div>
              <div class="detail-row payment-row">
                <span class="detail-label">Payment Method:</span>
                <ion-select 
                  [(ngModel)]="paymentMethod"
                  interface="action-sheet"
                  class="payment-method-select">
                  <ion-select-option value="cash">
                    ðŸ’µ Cash
                  </ion-select-option>
                  <ion-select-option value="paymaya">
                    ðŸ’³ PayMaya
                  </ion-select-option>
                  <ion-select-option value="gcash">
                    ðŸ“± GCash
                  </ion-select-option>
                </ion-select>
              </div>
            </div>

            <!-- Terms Notice -->
            <div class="ticket-notice">
              <ion-icon name="information-circle-outline" style="font-size: 16px; margin-right: 6px;"></ion-icon>
              <span style="font-size: 11px;">Present this ticket to the conductor upon boarding</span>
            </div>
          </ion-card-content>
          
          <div class="ticket-footer">           
            <ion-button expand="block" color="primary" (click)="closeTicket()">
              <ion-icon name="close-circle-outline" slot="start"></ion-icon>
              Close Ticket
            </ion-button>
            <ion-button expand="block" fill="outline" color="medium" (click)="shareTicket()">
              <ion-icon name="share-outline" slot="start"></ion-icon>
              Share
            </ion-button>
          </div>
        